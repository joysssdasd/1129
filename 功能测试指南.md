# 登录系统功能测试指南

## 测试环境
- **生产URL**: https://74innuu72x41.space.minimaxi.com
- **测试账号**: 
  - 手机号：13500000001
  - 当前密码：abc1234
  - 微信号：test_user_001

## 已完成的自动化测试

### ✅ 测试1：新用户注册流程（三步流程）
**测试状态：通过**

**测试步骤：**
1. 访问网站，点击"注册"标签
2. 输入手机号：13500000001
3. 点击"发送"获取验证码
4. 输入收到的验证码：760466
5. 点击"下一步"进入第二步
6. 输入微信号：test_user_001
7. 设置密码：abc123
8. 确认密码：abc123
9. 输入邀请码：ADMIN1
10. 点击"完成注册"

**验证结果：**
- ✅ 验证码发送成功
- ✅ 三步流程完整运行
- ✅ 用户成功创建
- ✅ 自动获得100积分
- ✅ 邀请码识别正确
- ✅ 密码加密存储（数据库验证）

### ✅ 测试2：密码登录功能（主要方式）
**测试状态：通过**

**测试步骤：**
1. 访问网站（自动跳转登录页）
2. 确认默认为"登录"标签，密码登录模式
3. 输入手机号：13500000001
4. 输入密码：abc123
5. 点击"登录"按钮

**验证结果：**
- ✅ 登录成功，跳转到主页
- ✅ 显示用户积分：100
- ✅ 页面完整加载
- ✅ 无控制台错误

### ✅ 测试3：修改密码功能
**测试状态：通过**

**测试步骤：**
1. 登录后进入"个人中心"
2. 点击"修改密码"功能卡片
3. 输入原密码：abc123
4. 输入新密码：abc1234
5. 确认新密码：abc1234
6. 点击"确认修改"

**验证结果：**
- ✅ 密码强度验证显示正常
- ✅ 修改操作执行成功
- ✅ 页面返回个人中心
- ✅ 数据库密码已更新（Salt值变化）

## 需要手动验证的功能

### 🔍 测试4：用新密码重新登录
**目的：验证密码修改是否真正生效**

**操作步骤：**
1. 如果已登录，先退出登录
2. 在登录页输入手机号：13500000001
3. 输入新密码：abc1234
4. 点击"登录"

**预期结果：**
- ✅ 应该登录成功
- ✅ 进入主页，显示用户信息

### 🔍 测试5：验证码登录（备用方式）
**目的：验证备用登录方式是否正常**

**操作步骤：**
1. 在登录页点击"使用验证码登录"
2. 输入手机号：13500000001
3. 点击"发送"获取验证码
4. 查收短信，输入6位验证码
5. 点击"登录"

**预期结果：**
- ✅ 验证码发送成功（收到短信）
- ✅ 倒计时60秒显示
- ✅ 输入验证码后登录成功

### 🔍 测试6：登录模式切换
**目的：验证两种登录方式切换是否流畅**

**操作步骤：**
1. 在登录页，从"密码登录"切换到"验证码登录"
2. 观察页面变化
3. 再从"验证码登录"切换回"密码登录"
4. 观察页面变化

**预期结果：**
- ✅ 切换顺畅无闪烁
- ✅ 表单字段正确显示
- ✅ 之前输入的内容保留

### 🔍 测试7：密码强度验证
**目的：验证密码强度实时验证功能**

**操作步骤（注册页或修改密码页）：**
1. 输入弱密码（如：123）
   - 预期：显示"密码至少需要6位"
2. 输入纯数字（如：123456）
   - 预期：显示"密码必须包含字母"
3. 输入纯字母（如：abcdef）
   - 预期：显示"密码必须包含数字"
4. 输入合格密码（如：abc123）
   - 预期：显示"密码强度良好"（绿色）

### 🔍 测试8：验证码发送限制
**目的：验证防暴力破解机制**

**操作步骤：**
1. 在登录页或注册页，连续点击"发送"按钮
2. 第一次：应该成功发送
3. 第二次：应该显示60秒倒计时，无法发送
4. 等待60秒后再次发送
5. 重复多次发送（超过3次）

**预期结果：**
- ✅ 60秒内只能发送一次
- ✅ 同一手机号1小时内最多3次
- ✅ 超过次数显示错误提示

### 🔍 测试9：错误提示测试
**目的：验证错误处理和提示**

**测试场景1：密码登录错误**
- 输入错误密码登录
- 预期：显示"手机号或密码错误"

**测试场景2：未注册手机号**
- 使用未注册的手机号登录
- 预期：显示"手机号或密码错误"

**测试场景3：验证码错误**
- 输入错误的验证码
- 预期：显示"验证码无效或已过期"

**测试场景4：密码不一致**
- 在注册或修改密码时，两次密码输入不一致
- 预期：显示"两次密码输入不一致"

### 🔍 测试10：现有功能兼容性测试
**目的：确保新功能不影响原有系统**

**测试项目：**
1. 发布交易信息功能
2. 查看联系方式（消耗积分）
3. 充值申请功能
4. 积分明细查看
5. 我的发布管理
6. 管理后台功能（管理员账号）

**预期结果：**
- ✅ 所有现有功能正常工作
- ✅ 积分系统正常
- ✅ 数据完整无损

## 测试账号信息

### 测试账号1（新注册）
- **手机号**: 13500000001
- **当前密码**: abc1234
- **微信号**: test_user_001
- **邀请码**: F8N2QN
- **当前积分**: 100
- **状态**: 可用于测试所有功能

### 管理员账号（用于测试管理功能）
- **手机号**: 13800138000
- **微信号**: admin_wechat
- **邀请码**: ADMIN1

### 测试用户账号（已有数据）
- **手机号**: 13900139000
- **微信号**: test_user
- **邀请码**: TEST01

**注意**: 老账号可能没有设置密码，只能使用验证码登录

## 真实短信验证码测试

### 短信服务配置
- **服务商**: spug短信平台
- **API URL**: https://push.spug.cc/send/Xyd9M8AlV5rKbDBk
- **发送格式**: 6位数字验证码
- **有效期**: 5分钟

### 测试真实短信
**方法1：使用自己的手机号**
1. 在注册页面输入自己的真实手机号
2. 点击"发送"
3. 查收短信（应该在1分钟内收到）
4. 使用收到的验证码完成注册

**方法2：测试发送频率限制**
1. 连续发送验证码
2. 验证60秒限制是否生效
3. 验证1小时3次限制是否生效

## 移动端测试

### 响应式设计测试
1. 使用手机浏览器访问网站
2. 测试所有功能在手机上的表现
3. 检查按钮大小、输入框、文字可读性

### 预期表现
- ✅ 自适应不同屏幕尺寸
- ✅ 触摸操作友好
- ✅ 文字清晰可读
- ✅ 按钮大小合适

## 安全性验证

### 密码存储安全
**验证方法：**
```sql
-- 查询数据库中的密码字段
SELECT phone, password FROM users WHERE phone = '13500000001';
```

**预期结果：**
- ✅ 密码字段不是明文
- ✅ 格式为 `salt:hash`
- ✅ 每次修改密码，salt值都会变化

### 验证码安全
**验证要点：**
- ✅ 验证码使用后自动失效
- ✅ 过期验证码无法使用
- ✅ 发送频率限制生效

## 测试报告模板

完成测试后，请记录：

### 测试结果统计
- 总测试项：10项
- 通过项：___ 项
- 失败项：___ 项
- 待修复问题：___ 个

### 发现的问题
| 编号 | 问题描述 | 严重程度 | 复现步骤 |
|------|----------|----------|----------|
| 1    |          | 高/中/低  |          |

### 改进建议
- 建议1：...
- 建议2：...

## 快速测试清单

最小化测试（5分钟）：
- [ ] 密码登录成功
- [ ] 注册流程完整
- [ ] 修改密码成功
- [ ] 验证码登录成功
- [ ] 现有功能正常

完整测试（20分钟）：
- [ ] 所有测试4-10全部执行
- [ ] 移动端测试
- [ ] 边界情况测试
- [ ] 错误提示测试

## 联系方式

如发现问题或需要帮助，请记录：
1. 问题描述
2. 复现步骤
3. 截图或错误信息
4. 浏览器和设备信息
