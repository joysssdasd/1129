<view class="container">
  <!-- å½“å‰ç§¯åˆ† -->
  <view class="current-points">
    <view class="points-label">å½“å‰ç§¯åˆ†</view>
    <view class="points-value">{{userInfo.points || 0}}</view>
  </view>

  <!-- å……å€¼é€‰é¡¹ -->
  <view class="section">
    <view class="section-title">é€‰æ‹©å……å€¼é‡‘é¢</view>
    <view class="amount-grid">
      <view 
        class="amount-item {{selectedAmount === item.amount && !isCustom ? 'active' : ''}}"
        wx:for="{{rechargeOptions}}"
        wx:key="amount"
        data-amount="{{item.amount}}"
        bindtap="selectAmount"
      >
        <view class="amount-value">Â¥{{item.amount}}</view>
        <view class="amount-points">è·å¾— {{item.points}} ç§¯åˆ†</view>
        <view class="amount-bonus">èµ é€ {{item.bonus}} ç§¯åˆ†</view>
      </view>
    </view>

    <!-- è‡ªå®šä¹‰é‡‘é¢ -->
    <view class="custom-input-wrap">
      <view class="custom-label">è‡ªå®šä¹‰é‡‘é¢ï¼ˆ1å…ƒ=1ç§¯åˆ†ï¼Œæ— èµ é€ï¼‰</view>
      <input 
        class="custom-input {{isCustom ? 'active' : ''}}"
        type="number"
        placeholder="è¾“å…¥è‡ªå®šä¹‰é‡‘é¢"
        value="{{customAmount}}"
        bindinput="onCustomInput"
      />
      <view class="custom-tip">æœ€ä½1å…ƒï¼Œæœ€é«˜100000å…ƒ</view>
    </view>
  </view>

  <!-- æ”¶æ¬¾äºŒç»´ç  -->
  <view class="section">
    <view class="section-title">æ‰«ç ä»˜æ¬¾</view>
    <view class="qrcode-grid">
      <view class="qrcode-item" bindtap="previewQRCode" data-type="wechat">
        <image 
          wx:if="{{paymentQRCodes.wechat}}"
          class="qrcode-image" 
          src="{{paymentQRCodes.wechat}}" 
          mode="aspectFit"
        />
        <view wx:else class="qrcode-placeholder">æš‚æ— </view>
        <view class="qrcode-label">å¾®ä¿¡æ”¯ä»˜</view>
      </view>
      <view class="qrcode-item" bindtap="previewQRCode" data-type="alipay">
        <image 
          wx:if="{{paymentQRCodes.alipay}}"
          class="qrcode-image" 
          src="{{paymentQRCodes.alipay}}" 
          mode="aspectFit"
        />
        <view wx:else class="qrcode-placeholder">æš‚æ— </view>
        <view class="qrcode-label">æ”¯ä»˜å®</view>
      </view>
    </view>
    <view class="qrcode-tip">ç‚¹å‡»äºŒç»´ç å¯æ”¾å¤§æŸ¥çœ‹</view>
  </view>

  <!-- ä¸Šä¼ æˆªå›¾ -->
  <view class="section">
    <view class="section-title">ä¸Šä¼ ä»˜æ¬¾æˆªå›¾</view>
    <view class="upload-area" bindtap="chooseScreenshot" wx:if="{{!screenshot}}">
      <view class="upload-icon">ğŸ“·</view>
      <view class="upload-text">ç‚¹å‡»ä¸Šä¼ ä»˜æ¬¾æˆªå›¾</view>
    </view>
    <view class="screenshot-preview" wx:else>
      <image class="screenshot-image" src="{{screenshot}}" mode="widthFix" />
      <view class="screenshot-remove" bindtap="chooseScreenshot">Ã—</view>
    </view>
  </view>

  <!-- æäº¤ -->
  <view class="submit-section">
    <view class="points-preview">
      <text class="preview-label">æœ¬æ¬¡å……å€¼å°†è·å¾—</text>
      <text class="preview-value">{{isCustom ? (customAmount || 0) : (rechargeOptions[selectedAmount === 50 ? 0 : selectedAmount === 100 ? 1 : selectedAmount === 300 ? 2 : 3].points || 0)}} ç§¯åˆ†</text>
    </view>
    <button 
      class="submit-btn" 
      bindtap="submitRecharge"
      disabled="{{loading}}"
    >
      {{loading ? 'æäº¤ä¸­...' : 'æäº¤å……å€¼ç”³è¯·'}}
    </button>
  </view>
</view>
