<view class="container">
  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view 
      class="filter-item {{currentFilter === 'all' ? 'active' : ''}}"
      data-filter="all"
      bindtap="onFilterChange"
    >å…¨éƒ¨</view>
    <view 
      class="filter-item {{currentFilter === 'active' ? 'active' : ''}}"
      data-filter="active"
      bindtap="onFilterChange"
    >ä¸Šæ¶ä¸­</view>
    <view 
      class="filter-item {{currentFilter === 'inactive' ? 'active' : ''}}"
      data-filter="inactive"
      bindtap="onFilterChange"
    >å·²ä¸‹æ¶</view>
  </view>

  <!-- å¸–å­åˆ—è¡¨ -->
  <view class="post-list">
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{!loading && posts.length === 0}}">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">æš‚æ— å‘å¸ƒè®°å½•</view>
      <button class="empty-btn" bindtap="goPublish">å»å‘å¸ƒ</button>
    </view>

    <!-- å¸–å­å¡ç‰‡ -->
    <view 
      class="post-item" 
      wx:for="{{posts}}" 
      wx:key="id"
    >
      <view class="post-header">
        <view class="post-title" bindtap="goDetail" data-id="{{item.id}}">{{item.title}}</view>
        <view class="post-status {{item.statusClass}}">{{item.statusLabel}}</view>
      </view>

      <view class="post-info">
        <view class="info-item">
          <text class="info-label">ä»·æ ¼ï¼š</text>
          <text class="info-value price">Â¥{{item.price}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">æŸ¥çœ‹ï¼š</text>
          <text class="info-value">{{item.view_count}}/{{item.view_limit}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">å‰©ä½™ï¼š</text>
          <text class="info-value">{{item.remainingViews}}æ¬¡</text>
        </view>
      </view>

      <view class="post-meta">
        <view class="post-type">{{item.typeLabel}}</view>
        <view class="post-time">{{item.createTime}}</view>
      </view>

      <view class="post-actions">
        <button class="action-btn view" bindtap="goDetail" data-id="{{item.id}}">æŸ¥çœ‹</button>
        <button class="action-btn toggle" bindtap="toggleStatus" data-post="{{item}}">
          {{item.status === 1 ? 'ä¸‹æ¶' : 'ä¸Šæ¶'}}
        </button>
        <button class="action-btn delete" bindtap="deletePost" data-post="{{item}}">åˆ é™¤</button>
      </view>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view class="loading" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
  </view>
</view>
