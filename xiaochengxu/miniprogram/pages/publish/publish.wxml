<view class="container">
  
  <!-- 交易类型 (Segmented Control Style) -->
  <view class="segment-control-container">
    <view class="segment-control">
      <view class="segment-item {{tradeType === 1 ? 'active' : ''}}" bindtap="selectTradeType" data-type="1">求购</view>
      <view class="segment-item {{tradeType === 2 ? 'active' : ''}}" bindtap="selectTradeType" data-type="2">出售</view>
      <view class="segment-item {{tradeType === 3 ? 'active' : ''}}" bindtap="selectTradeType" data-type="3">做多</view>
      <view class="segment-item {{tradeType === 4 ? 'active' : ''}}" bindtap="selectTradeType" data-type="4">做空</view>
    </view>
  </view>

  <view class="risk-notice" wx:if="{{tradeType === 3 || tradeType === 4}}">
    <text>市场有风险，决策需谨慎。</text>
  </view>

  <!-- 表单区域 -->
  <view class="ios-group">
    <view class="ios-cell">
      <view class="ios-cell-body" style="flex: 0 0 160rpx;">标题</view>
      <input class="ios-input" placeholder="请输入标题" value="{{title}}" bindinput="onTitleInput" maxlength="50" style="flex: 1;" />
    </view>
    
    <view class="ios-cell">
      <view class="ios-cell-body" style="flex: 0 0 160rpx;">价格</view>
      <input class="ios-input" type="digit" placeholder="0.00" value="{{price}}" bindinput="onPriceInput" style="flex: 1;" />
      <view class="ios-cell-end" style="padding-left: 10rpx;">¥</view>
    </view>

    <view class="ios-cell" wx:if="{{tradeType === 3 || tradeType === 4}}">
      <view class="ios-cell-body" style="flex: 0 0 160rpx;">交割天数</view>
      <input class="ios-input" type="number" placeholder="0" value="{{deliveryDays}}" bindinput="onDeliveryDaysInput" style="flex: 1;" />
      <view class="ios-cell-end" style="padding-left: 10rpx;">天</view>
    </view>
  </view>

  <!-- 补充信息 -->
  <view class="ios-group-title">补充信息</view>
  <view class="ios-group">
    <view class="ios-cell" style="display: block; padding: 24rpx 32rpx; min-height: 200rpx;">
      <textarea 
        class="ios-textarea" 
        placeholder="可补充更多交易细节..." 
        value="{{extraInfo}}" 
        bindinput="onExtraInfoInput" 
        maxlength="200" 
        style="width: 100%; height: 160rpx; font-size: 34rpx; color: #000;"
      ></textarea>
      <view style="text-align: right; font-size: 24rpx; color: #C7C7CC;">{{extraInfo.length || 0}}/200</view>
    </view>
  </view>

  <!-- 消耗积分 -->
  <view class="ios-group-title">查看次数限制 (消耗积分: {{viewLimit}})</view>
  <view class="ios-group">
    <view class="ios-cell" style="display: block; padding: 32rpx;">
      <slider min="5" max="50" step="5" value="{{viewLimit}}" bindchange="onViewLimitChange" activeColor="#007AFF" block-size="28" show-value/>
    </view>
  </view>

  <!-- 底部占位 -->
  <view style="height: 180rpx;"></view>

  <!-- 底部发布按钮栏 -->
  <view class="bottom-bar">
    <button class="publish-btn" bindtap="handlePublish" disabled="{{loading}}">
      <text wx:if="{{!loading}}">立即发布</text>
      <ios-loading wx:else visible="{{true}}" type="spinner" fullscreen="{{false}}" />
    </button>
  </view>
</view>