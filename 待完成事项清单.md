# 待完成事项清单

## 部署任务

### Edge Functions部署（等待token刷新）
- [ ] 刷新Supabase access token
- [ ] 部署 toggle-post-status（新增）
  - 功能：处理上架/下架并返还积分
  - 文件：/workspace/supabase/functions/toggle-post-status/index.ts
- [ ] 部署 recharge-request（更新）
  - 功能：充值申请（新套餐）
  - 文件：/workspace/supabase/functions/recharge-request/index.ts

## 测试任务

### 1. 积分系统测试
- [ ] 测试新充值套餐（50/100/300/500元）
  - 充值50元，验证获得55积分
  - 充值100元，验证获得115积分
  - 充值300元，验证获得370积分
  - 充值500元，验证获得650积分
- [ ] 测试积分返还机制
  - 发布信息并让其他用户查看
  - 下架信息，验证积分返还
  - 检查积分明细记录
- [ ] 验证积分计算准确性
  - 查看point_transactions表
  - 核对balance_after字段

### 2. 快捷交易按钮测试
- [ ] 首次点击测试
  - 验证积分扣除（-1积分）
  - 验证联系方式复制成功
  - 检查提示信息显示
- [ ] 重复点击测试
  - 验证免费复制功能
  - 确认不重复扣除积分
- [ ] 积分不足测试
  - 将积分设置为0
  - 验证按钮变灰
  - 验证提示信息

### 3. 下拉刷新测试
- [ ] 移动端下拉测试
  - 验证刷新指示器显示
  - 验证数据刷新成功
  - 验证用户积分更新
- [ ] 边界条件测试
  - 非顶部位置下拉
  - 刷新过程中再次下拉
  - 刷新完成后立即下拉

### 4. 查看历史测试
- [ ] 入口访问测试
  - 个人中心 → 查看历史
  - 验证历史记录显示
- [ ] 功能测试
  - 点击历史记录跳转
  - 验证7天数据保留

### 5. UI优化测试
- [ ] 首页信息密度
  - 统计单屏显示信息数量
  - 验证7+条信息显示
- [ ] 响应式测试
  - 移动端布局
  - 平板布局
  - 桌面端布局

### 6. 兼容性测试
- [ ] 浏览器兼容性
  - Chrome
  - Safari
  - Firefox
  - Edge
- [ ] 设备兼容性
  - iOS
  - Android
  - iPad
  - 桌面端

## 性能测试
- [ ] Edge Function响应时间
  - toggle-post-status平均响应时间
  - recharge-request平均响应时间
- [ ] 前端加载性能
  - 首页加载时间
  - 下拉刷新响应速度

## 文档任务
- [x] 创建优化升级报告
- [x] 创建用户使用指南
- [ ] 更新管理员操作手册（如需要）

## 部署记录

### 前端部署
- ✅ 构建成功
- ✅ 部署成功
- URL：https://jr6ejz51qmcb.space.minimaxi.com
- 时间：2025-11-11 00:13

### Edge Functions部署
- ⏳ 等待token刷新
- 待部署：2个函数
- 预计时间：token刷新后5分钟内

## 备注
- 前端已完全就绪
- Edge Functions代码已准备好
- 仅等待Supabase token刷新即可完成部署
